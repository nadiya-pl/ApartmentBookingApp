@model List<PropertyDto>

@{
    ViewData["Title"] = "Properties Management";
}

<div class="container mt-5 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="text-white">Properties</h2>
        <a asp-controller="Admin" asp-action="Create" class="btn bk-btn w-40 mb-2 ">
            <i class="fa fa-plus mr-1"></i> Add Property
        </a>
    </div>

    @if (Model != null && Model.Any())
    {
        @foreach (var property in Model)
        {
            <div class="property-card d-flex align-items-start mb-3 border-0 shadow-sm" style="background-color:#f6f6f6;">

              
                <div class="property-image" style="flex:0 0 280px; height:180px; overflow:hidden;">
                    <img src="@property.ImageUrl"
                         alt="@property.Title"
                         style="width:100%; height:100%; object-fit:cover; display:block;">
                </div>

         
                <div class="property-info flex-grow-1 px-4 pt-4" style="align-self:flex-start;">
                    <h5 class="mb-2">@property.Title</h5>
                    <p class="mb-1"><strong>City:</strong> @property.City</p>
                    <p class="mb-0"><strong>Price:</strong> $@property.PricePerNight / night</p>
                </div>

     
                <div class="property-actions"
                     style="display:flex; flex-direction:column; gap:10px; flex:0 0 5%; margin-top:16px; margin-right:16px;">
                    <form asp-controller="Admin" asp-action="Delete" method="post" asp-route-id="@property.Id" class="delete-form">
                        <button type="submit" class="btn btn-danger btn-sm action-btn" title="Delete">
                            <i class="fa fa-trash"></i>
                        </button>
                    </form>
                    <a asp-controller="Properties" asp-action="Details" asp-route-id="@property.Id"
                       class="btn btn-outline-dark btn-sm action-btn" title="View">
                        <i class="fa fa-eye"></i>
                    </a>
                </div>
            </div>
        }
    }
    else
    {
        <p class="text-white">No properties found.</p>
    }
</div>




<script>
    document.addEventListener("DOMContentLoaded", function () {
        const deleteForms = document.querySelectorAll(".delete-form");

        deleteForms.forEach(form => {
            form.addEventListener("submit", function (e) {
                const confirmed = confirm("Are you sure you want to delete this property?");
                if (!confirmed) {
                    e.preventDefault(); 
                }
            });
        });
    });
</script>
